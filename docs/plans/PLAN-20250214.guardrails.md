# Execution Guardrails for PLAN-20250214

## Allowed Write Paths
- `services/api/**`
- `services/worker/**`
- `supabase/**`
- `docs/**`
- `configs/**`
- Lovable project files (screens, modals) under project repository

## Denylist
- `secrets/**`
- `.github/workflows/release.yml`
- `scripts/prod/**`
- `node_modules/**`
- `dist/**`
- `.env*`
- `package-lock.json` (unless bumping deps explicitly)

## Required Commands Per Task
- Backend: `npm run lint`, `npm run test`, `npm run build`
- Worker: `npm run lint`, `npm run test`
- Supabase migrations: `supabase migration lint` (or equivalent), `supabase migration run --dry-run`
- Frontend (Lovable): run Lovable preview/build checks (if provided)

## Commit Policy
- One atomic commit per task
- Commit message format: `[PLAN-20250214] T-00X - <short summary>`
- Do not squash commits until PR merge

## Stop-on-Fail
If any command fails (format, lint, test, migration):
1. Halt execution immediately  
2. Output a failure report  
3. Wait for manual approval or fix before continuing  

## Database & Migrations
- Always generate rollback scripts for migrations  
- Dry-run migrations before committing  

## Safety Rules
- Never modify or delete production secrets  
- Never change CI/CD config unless the plan includes it explicitly  
- Never disable lint or test checks  
- Never refactor beyond plan scope  

## Reporting
At completion, create `/plans/PLAN-20250214.execution-report.md` containing:
- Tasks completed
- Files changed count
- Tests added or updated
- Any TODOs or follow-ups
- Next owner actions
